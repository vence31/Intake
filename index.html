<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta name="theme-color" content="#020617">
<title>Disability AI | Elite Diagnostic Engine</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#020617;--bg2:#0f172a;--bg3:#1e293b;
  --blue:#3b82f6;--blue-dim:#1d4ed8;--blue-glo:rgba(59,130,246,.4);
  --green:#10b981;--yellow:#f59e0b;--red:#ef4444;
  --slate:#334155;--text:#f8fafc;--muted:#64748b;--border:rgba(51,65,85,.6);
  --font:'Inter',sans-serif;--mono:'JetBrains Mono',monospace;
  --r:12px;--tr:.22s ease;
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
html{scroll-behavior:smooth;}
body{font-family:var(--font);background:var(--bg);color:var(--text);min-height:100vh;
  padding:24px 16px 60px;display:flex;flex-direction:column;align-items:center;
  -webkit-font-smoothing:antialiased;overflow-x:hidden;}
body::before{content:'';position:fixed;inset:0;
  background:radial-gradient(circle at 10% 20%,rgba(30,58,138,.22) 0%,transparent 45%),
             radial-gradient(circle at 85% 75%,rgba(6,182,212,.07) 0%,transparent 40%);
  pointer-events:none;z-index:0;}

/* HEADER */
.hdr{width:100%;max-width:600px;text-align:center;margin-bottom:24px;position:relative;z-index:1;animation:fadeDown .5s ease both;}
.hdr h1{font-size:clamp(24px,6vw,36px);font-weight:900;letter-spacing:-.03em;line-height:1.1;margin-bottom:8px;}
.hdr h1 span{color:var(--blue);}
.hdr-badges{display:flex;justify-content:center;gap:16px;font-family:var(--mono);font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.12em;color:var(--muted);}
.bdot{width:6px;height:6px;border-radius:50%;background:var(--green);display:inline-block;margin-right:4px;}

/* SCORE PANEL */
.score-panel{width:100%;max-width:600px;background:rgba(15,23,42,.9);backdrop-filter:blur(20px);
  border:1px solid rgba(59,130,246,.2);border-radius:var(--r);padding:14px 20px;
  margin-bottom:14px;display:flex;align-items:center;justify-content:space-between;gap:20px;
  position:relative;z-index:1;animation:fadeUp .5s ease .05s both;}
.sc-lbl{font-family:var(--mono);font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.12em;color:var(--blue);margin-bottom:3px;}
.sc-num{font-size:26px;font-weight:900;color:var(--text);font-family:var(--mono);line-height:1;}
.sc-bar-wrap{flex:1;height:10px;background:var(--bg3);border-radius:5px;overflow:hidden;}
.sc-bar{height:100%;background:var(--blue);border-radius:5px;width:20%;
  box-shadow:0 0 12px var(--blue-glo);transition:width .7s cubic-bezier(.4,0,.2,1),background .3s,box-shadow .3s;}

/* CARD */
.card{width:100%;max-width:600px;background:rgba(15,23,42,.9);backdrop-filter:blur(20px);
  border:1px solid var(--border);border-radius:20px;overflow:hidden;
  box-shadow:0 25px 80px rgba(0,0,0,.55);position:relative;z-index:1;animation:fadeUp .5s ease .1s both;}
.prog-line{height:3px;background:var(--blue);box-shadow:0 0 10px var(--blue-glo);transition:width .5s cubic-bezier(.4,0,.2,1);width:25%;}

/* AUTOSAVE */
.autosave{display:flex;align-items:center;gap:7px;padding:7px 22px;background:rgba(0,0,0,.35);
  border-bottom:1px solid var(--border);font-family:var(--mono);font-size:10px;font-weight:700;
  text-transform:uppercase;letter-spacing:.1em;color:var(--muted);}
.as-dot{width:6px;height:6px;border-radius:50%;background:var(--slate);transition:background var(--tr);}
.autosave.saving .as-dot{background:var(--yellow);animation:blink 1s infinite;}
.autosave.saved  .as-dot{background:var(--green);}
.autosave.saved{color:var(--green);}
@keyframes blink{0%,100%{opacity:1;}50%{opacity:.2;}}

/* STEP PIPS */
.pip-row{display:flex;padding:18px 22px 0;position:relative;}
.pip{flex:1;display:flex;flex-direction:column;align-items:center;position:relative;}
.pip:not(:last-child)::after{content:'';position:absolute;top:13px;left:50%;width:100%;height:1px;background:var(--border);z-index:0;transition:background var(--tr);}
.pip.done:not(:last-child)::after{background:var(--blue-dim);}
.pip-c{width:26px;height:26px;border-radius:50%;border:1.5px solid var(--slate);background:var(--bg2);
  display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:800;
  color:var(--muted);transition:all var(--tr);position:relative;z-index:1;font-family:var(--mono);}
.pip.active .pip-c{border-color:var(--blue);background:var(--blue);color:#fff;box-shadow:0 0 14px var(--blue-glo);}
.pip.done .pip-c{border-color:var(--blue-dim);background:var(--blue-dim);color:#fff;}
.pip-l{font-size:9px;font-weight:700;letter-spacing:.08em;text-transform:uppercase;color:var(--muted);margin-top:5px;display:none;}
.pip.active .pip-l,.pip.done .pip-l{color:var(--blue);}
@media(min-width:420px){.pip-l{display:block;}}

/* FORM BODY */
.form-body{padding:18px 22px 26px;}

/* STEP */
.step{display:none;animation:fadeStep .32s ease both;}
.step.active{display:block;}
@keyframes fadeStep{from{opacity:0;transform:translateX(16px);}to{opacity:1;transform:translateX(0);}}
.step-title{font-size:17px;font-weight:800;color:var(--text);margin-bottom:2px;letter-spacing:-.02em;}
.step-sub{font-family:var(--mono);font-size:10px;font-weight:700;color:var(--blue);
  text-transform:uppercase;letter-spacing:.1em;margin-bottom:18px;}

/* NOTICE */
.notice{background:rgba(59,130,246,.07);border:1px solid rgba(59,130,246,.18);border-radius:var(--r);
  padding:11px 14px;margin-bottom:18px;font-size:12px;color:#94a3b8;line-height:1.5;}
.notice strong{color:var(--blue);}

/* LABEL */
.lbl{display:block;font-family:var(--mono);font-size:10px;font-weight:700;text-transform:uppercase;
  letter-spacing:.1em;color:var(--blue);margin-bottom:6px;}
.lbl-hint{font-size:11px;color:var(--muted);font-family:var(--font);text-transform:none;
  letter-spacing:0;font-weight:400;margin-top:-3px;margin-bottom:7px;display:block;}

/* INPUTS */
input[type="text"],input[type="email"],input[type="tel"],input[type="number"],select,textarea{
  width:100%;background:var(--bg2);padding:12px 13px;border-radius:var(--r);
  border:1px solid var(--slate);margin-bottom:14px;color:var(--text);
  font-family:var(--font);font-size:15px;outline:none;-webkit-appearance:none;appearance:none;
  transition:border-color var(--tr),box-shadow var(--tr);min-height:50px;}
input:focus,select:focus,textarea:focus{border-color:var(--blue);box-shadow:0 0 0 3px rgba(59,130,246,.14),0 0 14px rgba(59,130,246,.12);}
input::placeholder,textarea::placeholder{color:var(--muted);}
select{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='%2364748b' stroke-width='2.5'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
  background-repeat:no-repeat;background-position:right 12px center;padding-right:38px;cursor:pointer;}
select option{background:var(--bg2);}
textarea{min-height:100px;resize:vertical;line-height:1.6;}
.two-col{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
@media(max-width:430px){.two-col{grid-template-columns:1fr;}}

/* CHOICE CARDS */
.choice-group{display:flex;flex-direction:column;gap:8px;margin-bottom:14px;}
.choice-group.horiz{flex-direction:row;flex-wrap:wrap;gap:8px;}
.choice-card{display:flex;align-items:center;gap:12px;padding:12px 14px;border:1px solid var(--slate);
  border-radius:var(--r);background:var(--bg2);cursor:pointer;transition:all var(--tr);
  user-select:none;-webkit-user-select:none;font-size:14px;color:#cbd5e1;}
.choice-card:hover{border-color:var(--blue);background:rgba(59,130,246,.06);}
.choice-card input[type="radio"],.choice-card input[type="checkbox"]{width:18px;height:18px;min-height:unset;
  padding:0;margin:0;border:none;background:none;box-shadow:none;margin-bottom:0;
  accent-color:var(--blue);cursor:pointer;flex-shrink:0;}
.choice-card input:focus{box-shadow:none;}
.choice-card.selected{border-color:var(--blue);background:rgba(59,130,246,.1);box-shadow:0 0 0 1px var(--blue);}
.choice-lbl{font-weight:600;color:var(--text);font-size:14px;}
.choice-sub{font-size:11px;color:var(--muted);margin-top:1px;}
.choice-card.horiz{flex:1;min-width:80px;justify-content:center;flex-direction:column;gap:4px;padding:10px 10px;text-align:center;}

/* FIELD ERRORS */
.fld{margin-bottom:0;}
.err{display:none;font-family:var(--mono);font-size:10px;font-weight:700;color:var(--red);
  margin-top:-8px;margin-bottom:10px;text-transform:uppercase;letter-spacing:.05em;}
.has-error input,.has-error select,.has-error textarea{border-color:var(--red);box-shadow:0 0 0 3px rgba(239,68,68,.1);}
.has-error .err{display:block;animation:shake .3s ease;}
.is-valid input,.is-valid select{border-color:var(--blue-dim);}
@keyframes shake{0%,100%{transform:translateX(0);}25%{transform:translateX(-4px);}75%{transform:translateX(4px);}}

/* TERMS */
.terms-box{background:var(--bg);border:1px solid var(--border);border-radius:var(--r);
  padding:13px 15px;margin-bottom:14px;font-size:12px;color:#94a3b8;line-height:1.7;
  max-height:130px;overflow-y:auto;}

/* SIGNATURE */
.sig-wrap{border:1px solid var(--slate);border-radius:var(--r);background:var(--bg2);
  overflow:hidden;position:relative;transition:border-color var(--tr);margin-bottom:14px;}
.sig-wrap:focus-within{border-color:var(--blue);box-shadow:0 0 0 3px rgba(59,130,246,.14);}
#sigCanvas{display:block;width:100%;height:110px;cursor:crosshair;touch-action:none;}
.sig-footer{display:flex;justify-content:space-between;align-items:center;padding:5px 12px;border-top:1px solid var(--border);}
.sig-ph-text{font-family:var(--mono);font-size:10px;color:var(--muted);text-transform:uppercase;letter-spacing:.08em;}
.sig-clear{font-family:var(--mono);font-size:10px;font-weight:700;color:var(--muted);background:none;border:none;cursor:pointer;text-transform:uppercase;letter-spacing:.08em;padding:3px 8px;border-radius:5px;transition:all var(--tr);}
.sig-clear:hover{background:rgba(239,68,68,.12);color:var(--red);}
.sig-canvas-ph{position:absolute;top:40px;left:50%;transform:translateX(-50%);font-family:var(--mono);font-size:11px;color:var(--muted);pointer-events:none;white-space:nowrap;letter-spacing:.06em;text-transform:uppercase;}

/* BUTTONS */
.step-nav{display:flex;gap:10px;margin-top:22px;padding-top:18px;border-top:1px solid var(--border);}
.btn-back{padding:12px 16px;background:var(--bg3);color:#94a3b8;border:1px solid var(--slate);
  border-radius:var(--r);font-family:var(--font);font-size:14px;font-weight:700;cursor:pointer;
  transition:all var(--tr);min-height:50px;}
.btn-back:hover{border-color:var(--blue);color:var(--text);}
.btn-next{flex:1;padding:12px 20px;background:var(--blue-dim);color:#fff;border:none;
  border-radius:var(--r);font-family:var(--font);font-size:14px;font-weight:800;cursor:pointer;
  transition:all var(--tr);box-shadow:0 4px 14px rgba(29,78,216,.4);min-height:50px;
  text-transform:uppercase;letter-spacing:.05em;}
.btn-next:hover{background:var(--blue);box-shadow:0 6px 20px rgba(59,130,246,.45);}
.btn-submit{flex:1;padding:13px 20px;background:var(--green);color:#fff;border:none;
  border-radius:var(--r);font-family:var(--font);font-size:14px;font-weight:800;cursor:pointer;
  transition:all var(--tr);box-shadow:0 4px 14px rgba(16,185,129,.35);min-height:50px;
  text-transform:uppercase;letter-spacing:.06em;}
.btn-submit:hover{background:#059669;box-shadow:0 6px 20px rgba(16,185,129,.45);}
.btn-submit:disabled{background:var(--slate);box-shadow:none;cursor:not-allowed;}

/* SUCCESS */
.success-screen{display:none;flex-direction:column;align-items:center;text-align:center;padding:48px 26px;}
.success-screen.show{display:flex;animation:fadeUp .5s ease both;}
.success-icon{width:78px;height:78px;border-radius:50%;background:rgba(16,185,129,.1);border:2px solid var(--green);
  display:flex;align-items:center;justify-content:center;margin-bottom:20px;animation:pop .6s cubic-bezier(.34,1.56,.64,1) both;}
.success-icon svg{width:34px;height:34px;stroke:var(--green);fill:none;stroke-width:2.5;stroke-linecap:round;stroke-linejoin:round;}
.success-screen h2{font-size:23px;font-weight:900;color:var(--text);margin-bottom:8px;letter-spacing:-.02em;}
.success-screen p{font-size:14px;color:#94a3b8;line-height:1.7;max-width:340px;}
.success-ref{margin-top:18px;padding:11px 20px;background:var(--bg2);border:1px solid var(--border);
  border-radius:var(--r);font-family:var(--mono);font-size:13px;color:var(--blue);letter-spacing:.08em;}
.success-note{margin-top:12px;font-size:10px;color:var(--muted);font-family:var(--mono);text-transform:uppercase;letter-spacing:.06em;}
@keyframes pop{from{transform:scale(.4);opacity:0;}to{transform:scale(1);opacity:1;}}

/* FOOTER */
.page-footer{margin-top:20px;text-align:center;font-family:var(--mono);font-size:10px;color:var(--muted);
  line-height:1.9;text-transform:uppercase;letter-spacing:.1em;z-index:1;position:relative;}
.page-footer a{color:var(--muted);text-decoration:none;}
.page-footer a:hover{color:var(--blue);}

@keyframes fadeUp{from{opacity:0;transform:translateY(14px);}to{opacity:1;transform:translateY(0);}}
@keyframes fadeDown{from{opacity:0;transform:translateY(-10px);}to{opacity:1;transform:translateY(0);}}
:focus-visible{outline:2px solid var(--blue);outline-offset:3px;border-radius:4px;}
</style>
</head>
<body>

<!-- HEADER -->
<div class="hdr">
  <h1>DISABILITY AI <span>OPTIMIZER</span></h1>
  <div class="hdr-badges">
    <span><span class="bdot"></span>Secure Intake</span>
    <span>&bull;</span>
    <span>HIPAA Protocol</span>
    <span>&bull;</span>
    <span>AES-256</span>
  </div>
</div>

<!-- SCORE METER -->
<div class="score-panel">
  <div>
    <div class="sc-lbl">Case Strength Meter</div>
    <div class="sc-num" id="scoreDisplay">0%</div>
  </div>
  <div class="sc-bar-wrap">
    <div class="sc-bar" id="scoreBar"></div>
  </div>
</div>

<!-- CARD -->
<div class="card">
  <div class="prog-line" id="progLine"></div>

  <div class="autosave" id="autosave">
    <div class="as-dot" id="asDot"></div>
    <span id="asTxt">Progress saved automatically</span>
  </div>

  <div class="pip-row">
    <div class="pip active" id="pip1"><div class="pip-c">1</div><div class="pip-l">Personal</div></div>
    <div class="pip" id="pip2"><div class="pip-c">2</div><div class="pip-l">Disability</div></div>
    <div class="pip" id="pip3"><div class="pip-c">3</div><div class="pip-l">Support</div></div>
    <div class="pip" id="pip4"><div class="pip-c">4</div><div class="pip-l">Consent</div></div>
  </div>

  <div class="form-body" id="formBody">

    <!-- STEP 1 -->
    <div class="step active" id="step1">
      <div class="step-title">Bio-Identity</div>
      <div class="step-sub">Step 1 of 4 — Personal Information</div>
      <div class="notice"><strong>Notice:</strong> This is not legal advice. We are not attorneys. This intake connects you with legal advertising services only.</div>

      <div class="two-col">
        <div class="fld" id="f-fname">
          <label class="lbl" for="fname">First Name</label>
          <input type="text" id="fname" placeholder="First name" autocomplete="given-name">
          <div class="err">Required</div>
        </div>
        <div class="fld" id="f-lname">
          <label class="lbl" for="lname">Last Name</label>
          <input type="text" id="lname" placeholder="Last name" autocomplete="family-name">
          <div class="err">Required</div>
        </div>
      </div>

      <div class="fld" id="f-phone">
        <label class="lbl" for="phone">Phone Number</label>
        <input type="tel" id="phone" placeholder="(000) 000-0000" autocomplete="tel">
        <div class="err">Valid phone required</div>
      </div>

      <div class="fld" id="f-email">
        <label class="lbl" for="email">Email Address</label>
        <input type="email" id="email" placeholder="email@address.com" autocomplete="email">
        <div class="err">Valid email required</div>
      </div>

      <div class="two-col">
        <div class="fld" id="f-age">
          <label class="lbl" for="age">Age</label>
          <input type="number" id="age" placeholder="e.g. 54" min="18" max="100" oninput="updateScore()">
          <div class="err">Age 18–100 required</div>
        </div>
        <div class="fld" id="f-state">
          <label class="lbl" for="state">State</label>
          <select id="state">
            <option value="">Select state...</option>
            <option>Alabama</option><option>Alaska</option><option>Arizona</option><option>Arkansas</option>
            <option>California</option><option>Colorado</option><option>Connecticut</option><option>Delaware</option>
            <option>Florida</option><option>Georgia</option><option>Hawaii</option><option>Idaho</option>
            <option>Illinois</option><option>Indiana</option><option>Iowa</option><option>Kansas</option>
            <option>Kentucky</option><option>Louisiana</option><option>Maine</option><option>Maryland</option>
            <option>Massachusetts</option><option>Michigan</option><option>Minnesota</option><option>Mississippi</option>
            <option>Missouri</option><option>Montana</option><option>Nebraska</option><option>Nevada</option>
            <option>New Hampshire</option><option>New Jersey</option><option>New Mexico</option><option>New York</option>
            <option>North Carolina</option><option>North Dakota</option><option>Ohio</option><option>Oklahoma</option>
            <option>Oregon</option><option>Pennsylvania</option><option>Rhode Island</option><option>South Carolina</option>
            <option>South Dakota</option><option>Tennessee</option><option>Texas</option><option>Utah</option>
            <option>Vermont</option><option>Virginia</option><option>Washington</option><option>Washington DC</option>
            <option>West Virginia</option><option>Wisconsin</option><option>Wyoming</option>
            <option>Virgin Islands</option><option>Puerto Rico</option>
          </select>
          <div class="err">State required</div>
        </div>
      </div>

      <div class="step-nav">
        <button class="btn-next" onclick="nextStep(1)">Next: Financial Thresholds &rsaquo;</button>
      </div>
    </div>

    <!-- STEP 2 -->
    <div class="step" id="step2">
      <div class="step-title">Financial Thresholds</div>
      <div class="step-sub">Step 2 of 4 — Earnings &amp; Claim History</div>

      <div class="fld" id="f-condition">
        <label class="lbl" for="condition">Primary Disability Condition</label>
        <span class="lbl-hint">Enter your main diagnosis — e.g. Back Pain, PTSD, Heart Disease</span>
        <input type="text" id="condition" placeholder="Describe your condition" oninput="updateScore()">
        <div class="err">Condition required</div>
      </div>

      <div class="fld" id="f-isblind">
        <label class="lbl" for="isBlind">Is Your Condition Blindness?</label>
        <select id="isBlind" onchange="handleBlindness()">
          <option value="NO">No</option>
          <option value="YES">Yes — Blindness</option>
        </select>
      </div>

      <div class="fld" id="f-oversga">
        <label class="lbl" id="earningsLbl">Monthly Earnings Above $1,690?</label>
        <span class="lbl-hint">SSA Substantial Gainful Activity (SGA) monthly limit</span>
        <div class="choice-group horiz" role="radiogroup">
          <label class="choice-card horiz"><input type="radio" name="oversga" value="NO" onchange="sel(this);updateScore()"><div class="choice-lbl">No</div></label>
          <label class="choice-card horiz"><input type="radio" name="oversga" value="YES" onchange="sel(this);updateScore()"><div class="choice-lbl">Yes</div></label>
        </div>
        <div class="err">Please answer</div>
      </div>

      <div class="fld" id="f-priorclaim">
        <label class="lbl">Prior Disability Claim Filed?</label>
        <div class="choice-group horiz" role="radiogroup">
          <label class="choice-card horiz"><input type="radio" name="priorclaim" value="NO" onchange="sel(this);toggleDenial();updateScore()"><div class="choice-lbl">No</div></label>
          <label class="choice-card horiz"><input type="radio" name="priorclaim" value="YES" onchange="sel(this);toggleDenial();updateScore()"><div class="choice-lbl">Yes</div></label>
        </div>
        <div class="err">Please answer</div>
      </div>

      <div class="fld" id="f-denial" style="display:none">
        <label class="lbl">Have a Denial Letter?</label>
        <div class="choice-group horiz" role="radiogroup">
          <label class="choice-card horiz"><input type="radio" name="denial" value="YES" onchange="sel(this);updateScore()"><div class="choice-lbl">Yes</div></label>
          <label class="choice-card horiz"><input type="radio" name="denial" value="NO" onchange="sel(this);updateScore()"><div class="choice-lbl">No</div></label>
          <label class="choice-card horiz"><input type="radio" name="denial" value="N/A" onchange="sel(this);updateScore()"><div class="choice-lbl">N/A</div></label>
        </div>
        <div class="err">Please answer</div>
      </div>

      <div class="step-nav">
        <button class="btn-back" onclick="prevStep(2)">Back</button>
        <button class="btn-next" onclick="nextStep(2)">Next: Capacity Analysis &rsaquo;</button>
      </div>
    </div>

    <!-- STEP 3 -->
    <div class="step" id="step3">
      <div class="step-title">Functional Capacity</div>
      <div class="step-sub">Step 3 of 4 — Physical Limitations</div>

      <div class="fld" id="f-sittime">
        <label class="lbl" for="sittime">Max Sit Time Before Discomfort</label>
        <select id="sittime" onchange="updateScore()">
          <option value="">Select limit...</option>
          <option value="10 Minutes Or Less">10 Minutes Or Less</option>
          <option value="15 Minutes Or Less">15 Minutes Or Less</option>
          <option value="30 Minutes Or Less">30 Minutes Or Less</option>
          <option value="1 Hour Or Less">1 Hour Or Less</option>
          <option value="2 Hours Or More">2 Hours Or More</option>
        </select>
        <div class="err">Required</div>
      </div>

      <div class="fld" id="f-standtime">
        <label class="lbl" for="standtime">Max Stand Time Before Discomfort</label>
        <select id="standtime" onchange="updateScore()">
          <option value="">Select limit...</option>
          <option value="10 Minutes Or Less">10 Minutes Or Less</option>
          <option value="15 Minutes Or Less">15 Minutes Or Less</option>
          <option value="30 Minutes Or Less">30 Minutes Or Less</option>
          <option value="1 Hour Or Less">1 Hour Or Less</option>
          <option value="2 Hours Or More">2 Hours Or More</option>
        </select>
        <div class="err">Required</div>
      </div>

      <div class="fld" id="f-liftweight">
        <label class="lbl" for="liftweight">Maximum Lifting Capacity</label>
        <select id="liftweight" onchange="updateScore()">
          <option value="">Select weight range...</option>
          <option value="Less than 10 lbs">Less than 10 lbs — Sedentary RFC</option>
          <option value="10-25 lbs">10–25 lbs — Light Work RFC</option>
          <option value="25-50 lbs">25–50 lbs — Medium Work RFC</option>
          <option value="50+ lbs">50+ lbs — Heavy Work RFC</option>
        </select>
        <div class="err">Required</div>
      </div>

      <div class="fld" id="f-impact">
        <label class="lbl" for="impact">Daily Life Impact Statement</label>
        <span class="lbl-hint">Describe how your disability affects your ability to work and function daily</span>
        <textarea id="impact" placeholder="Describe how your condition affects sitting, standing, concentration, sleep, and daily tasks..."></textarea>
        <div class="err">Impact statement required</div>
      </div>

      <div class="step-nav">
        <button class="btn-back" onclick="prevStep(3)">Back</button>
        <button class="btn-next" onclick="nextStep(3)">Next: Consent &amp; Sign &rsaquo;</button>
      </div>
    </div>

    <!-- STEP 4 -->
    <div class="step" id="step4">
      <div class="step-title">Consent &amp; Signature</div>
      <div class="step-sub">Step 4 of 4 — Review and sign to complete</div>

      <div class="terms-box" tabindex="0">
        <strong style="color:var(--blue)">Terms of Consent</strong><br><br>
        By submitting this form I confirm: (1) All information provided is true and accurate. (2) This is not legal advice and the review team are not attorneys. (3) I consent to being contacted by legal advertising partners regarding my disability case. (4) My information will be securely stored and used only to connect me with legal advertising services. (5) I may withdraw consent at any time.
      </div>

      <div class="fld" id="f-consent1">
        <label class="choice-card" style="cursor:pointer;margin-bottom:8px;">
          <input type="checkbox" id="consent1" onchange="sel(this)">
          <div><div class="choice-lbl">I have read and agree to the terms above</div></div>
        </label>
        <div class="err">Agreement required</div>
      </div>

      <div class="fld" id="f-consent2">
        <label class="choice-card" style="cursor:pointer">
          <input type="checkbox" id="consent2" onchange="sel(this)">
          <div><div class="choice-lbl">I confirm all information is accurate and truthful</div></div>
        </label>
        <div class="err">Confirmation required</div>
      </div>

      <div class="fld" id="f-sig" style="margin-top:14px">
        <label class="lbl">Digital Signature</label>
        <span class="lbl-hint">Draw your signature using your mouse or finger</span>
        <div class="sig-wrap">
          <canvas id="sigCanvas" width="552" height="110" tabindex="0"></canvas>
          <div class="sig-canvas-ph" id="sigPh">Draw signature here</div>
          <div class="sig-footer">
            <span class="sig-ph-text" id="sigStatus">Awaiting signature...</span>
            <button type="button" class="sig-clear" onclick="clearSig()">Clear</button>
          </div>
        </div>
        <div class="err">Signature required</div>
      </div>

      <div class="step-nav">
        <button class="btn-back" onclick="prevStep(4)">Back</button>
        <button class="btn-submit" id="submitBtn" onclick="submitForm()">
          <span id="submitLbl">Complete Submission</span>
        </button>
      </div>
    </div>

  </div><!-- /form-body -->

  <!-- SUCCESS -->
  <div class="success-screen" id="successScreen" role="alert" aria-live="polite">
    <div class="success-icon">
      <svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"></polyline></svg>
    </div>
    <h2>Authenticated</h2>
    <p>Intake complete. Your case file has been submitted for review. A team member will contact you within 1–2 business days.</p>
    <div class="success-ref">REF# <span id="refNum">—</span></div>
    <p class="success-note">Not legal advice &bull; Submission does not guarantee representation</p>
  </div>

</div><!-- /card -->

<div class="page-footer">
  Security: AES-256 &bull; HIPAA Protocol &bull; 2026 Ready<br>
  <a href="#">Privacy Policy</a> &bull; <a href="#">Terms</a> &bull; Not legal advice
</div>

<script>
const SUBMIT_URL="https://script.google.com/macros/s/AKfycbxI9gWvKnXt7E66K144fY44HfXEGYfgnm8vjFXn1VB5zOASAbcOgzk4dKiRub9BDo4/exec";
const STEPS_CFG=[{pct:"25%"},{pct:"50%"},{pct:"75%"},{pct:"92%"}];
let current=1,asTimer,sigEmpty=true,drawing=false;

// AUTOSAVE
function triggerAS(){
  const el=document.getElementById('autosave'),txt=document.getElementById('asTxt');
  el.className='autosave saving';txt.textContent='Saving...';
  clearTimeout(asTimer);
  asTimer=setTimeout(()=>{
    el.className='autosave saved';txt.textContent='Saved';
    setTimeout(()=>{el.className='autosave';txt.textContent='Progress saved automatically';},2200);
  },700);
}
document.querySelectorAll('input,select,textarea').forEach(el=>{el.addEventListener('change',triggerAS);el.addEventListener('input',triggerAS);});

// CHOICE HIGHLIGHT
function sel(input){
  if(input.type==='radio') document.querySelectorAll(`input[name="${input.name}"]`).forEach(r=>r.closest('.choice-card').classList.remove('selected'));
  input.closest('.choice-card').classList.toggle('selected',input.checked||input.type==='radio');
}

// BLINDNESS
function handleBlindness(){
  const v=document.getElementById('isBlind').value;
  document.getElementById('earningsLbl').textContent=v==='YES'?'Monthly Earnings Above $2,830? (Blind SGA)':'Monthly Earnings Above $1,690?';
  if(v==='YES') document.getElementById('condition').value='Blindness';
  updateScore();
}

// DENIAL TOGGLE
function toggleDenial(){
  const c=document.querySelector('input[name="priorclaim"]:checked');
  document.getElementById('f-denial').style.display=(c&&c.value==='YES')?'block':'none';
}

// SCORE
// ── SCORE MIRROR — exact same 7-factor algorithm as Apps Script scoreCase() ──
// Any change here must also be made in DisabilityScoring_FIXED_AppsScript.js
function updateScore(){
  let s = 0;

  // ── FACTOR 1: AGE (max 20 pts) — mirrors Apps Script exactly ──────────────
  const age = parseInt(document.getElementById('age').value) || 0;
  if      (age >= 60) s += 20;
  else if (age >= 55) s += 17;
  else if (age >= 50) s += 13;
  else if (age >= 45) s += 8;
  else if (age >= 35) s += 4;
  else if (age > 0)   s += 1;

  // ── FACTOR 2: WORK STATUS (max 25 pts) ───────────────────────────────────
  const work    = document.querySelector('input[name="workstatus"]:checked')?.value?.toLowerCase() || '';
  const overSGA = document.querySelector('input[name="oversga"]:checked')?.value || 'NO';
  if (work.includes('unemployed') || work.includes('not working')) {
    s += 25;
  } else if (work.includes('self')) {
    s += (overSGA === 'YES') ? 5 : 15;
  } else if (work.includes('part')) {
    s += (overSGA === 'YES') ? 5 : 18;
  } else if (work.includes('full')) {
    s += 0;
  } else {
    s += 10; // not yet answered — benefit of doubt
  }

  // ── FACTOR 3: PRIOR CLAIM + DENIAL (max 20 pts) ──────────────────────────
  const prior  = document.querySelector('input[name="priorclaim"]:checked')?.value || '';
  const denial = document.querySelector('input[name="denial"]:checked')?.value    || '';
  if (prior === 'YES') {
    s += (denial === 'YES') ? 20 : 12;
  } else {
    s += 8; // no prior claim — initial stage, still gets base points
  }

  // ── FACTOR 4: SIT TIME (max 10 pts) ──────────────────────────────────────
  const sit = (document.getElementById('sittime')?.value || '').toLowerCase();
  if      (sit.includes('10')) s += 10;
  else if (sit.includes('15')) s += 8;
  else if (sit.includes('30')) s += 5;
  else if (sit.includes('1 hour') || sit.includes('1hr')) s += 2;
  else if (sit.includes('2 hour') || sit.includes('2hr')) s += 0;
  else if (sit !== '')         s += 3;

  // ── FACTOR 5: STAND TIME (max 10 pts) ────────────────────────────────────
  const stand = (document.getElementById('standtime')?.value || '').toLowerCase();
  if      (stand.includes('10')) s += 10;
  else if (stand.includes('15')) s += 8;
  else if (stand.includes('30')) s += 5;
  else if (stand.includes('1 hour') || stand.includes('1hr')) s += 2;
  else if (stand.includes('2 hour') || stand.includes('2hr')) s += 0;
  else if (stand !== '')          s += 3;

  // ── FACTOR 6: LIFT WEIGHT (max 10 pts) ───────────────────────────────────
  const lift = (document.getElementById('liftweight')?.value || '').toLowerCase();
  if      (lift.includes('less than 10') || lift.includes('< 10')) s += 10;
  else if (lift.includes('10-25') || lift.includes('10–25'))       s += 7;
  else if (lift.includes('25-50') || lift.includes('25–50'))       s += 3;
  else if (lift.includes('50+'))                                   s += 0;
  else if (lift !== '')                                            s += 5;

  // ── FACTOR 7: CONDITION SEVERITY BONUS (max 5 pts) ───────────────────────
  const cond = document.getElementById('condition')?.value?.toLowerCase() || '';
  const blind = document.getElementById('isBlind')?.value || 'NO';
  const highValue = ['cancer','heart','seizure','stroke','parkinson','multiple sclerosis',
    'ms','als','hiv','aids','end stage','transplant','spinal','spine','fusion',
    'neuropathy','ptsd','schizophrenia','bipolar','chronic pain','surgery','back'];
  if (highValue.some(c => cond.includes(c)) || blind === 'YES') s += 5;

  // ── FINAL ─────────────────────────────────────────────────────────────────
  const final = Math.min(Math.round(s), 100);
  document.getElementById('scoreDisplay').textContent = final + '%';
  const bar = document.getElementById('scoreBar');
  bar.style.width      = final + '%';
  bar.style.background = final < 50 ? '#ef4444' : final < 80 ? '#f59e0b' : '#10b981';
  bar.style.boxShadow  = final < 50
    ? '0 0 12px rgba(239,68,68,.5)'
    : final < 80 ? '0 0 12px rgba(245,158,11,.5)'
    : '0 0 12px rgba(16,185,129,.5)';
}

// VALIDATE
function validate(step){
  let ok=true;
  function chk(fid,iid){
    const f=document.getElementById(fid);if(!f)return;
    f.classList.remove('has-error','is-valid');
    const el=document.getElementById(iid);if(!el)return;
    let fail=!el.value.trim();
    if(iid==='email'&&el.value.trim()) fail=!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(el.value);
    if(iid==='age'&&el.value.trim()) fail=parseInt(el.value)<18||parseInt(el.value)>100;
    if(fail){f.classList.add('has-error');ok=false;}else if(el.value.trim()) f.classList.add('is-valid');
  }
  function chkR(fid,name){
    const f=document.getElementById(fid);if(!f)return;
    f.classList.remove('has-error');
    if(!document.querySelector(`input[name="${name}"]:checked`)){f.classList.add('has-error');ok=false;}
  }
  function chkC(fid,iid){
    const f=document.getElementById(fid),el=document.getElementById(iid);if(!f||!el)return;
    f.classList.remove('has-error');
    if(!el.checked){f.classList.add('has-error');ok=false;}
  }
  if(step===1){chk('f-fname','fname');chk('f-lname','lname');chk('f-phone','phone');chk('f-email','email');chk('f-age','age');chk('f-state','state');}
  if(step===2){chk('f-condition','condition');chkR('f-priorclaim','priorclaim');}
  if(step===3){chk('f-sittime','sittime');chk('f-standtime','standtime');chk('f-liftweight','liftweight');chk('f-impact','impact');}
  if(step===4){chkC('f-consent1','consent1');chkC('f-consent2','consent2');if(sigEmpty){document.getElementById('f-sig').classList.add('has-error');ok=false;}}
  return ok;
}

// NAV
function nextStep(from){
  if(!validate(from)){const e=document.querySelector(`#step${from} .has-error`);if(e)e.scrollIntoView({behavior:'smooth',block:'center'});return;}
  document.getElementById('step'+from).classList.remove('active');
  current=from+1;
  document.getElementById('step'+current).classList.add('active');
  document.getElementById('pip'+from).classList.remove('active');
  document.getElementById('pip'+from).classList.add('done');
  document.getElementById('pip'+current).classList.add('active');
  document.getElementById('progLine').style.width=STEPS_CFG[current-1].pct;
  window.scrollTo({top:0,behavior:'smooth'});
}
function prevStep(from){
  document.getElementById('step'+from).classList.remove('active');
  current=from-1;
  document.getElementById('step'+current).classList.add('active');
  document.getElementById('pip'+from).classList.remove('active','done');
  document.getElementById('pip'+current).classList.add('active');
  document.getElementById('pip'+current).classList.remove('done');
  document.getElementById('progLine').style.width=STEPS_CFG[current-1].pct;
  window.scrollTo({top:0,behavior:'smooth'});
}

// SIGNATURE
const canvas=document.getElementById('sigCanvas'),ctx=canvas.getContext('2d');
function resizeSig(){
  const dpr=window.devicePixelRatio||1,rect=canvas.getBoundingClientRect();
  canvas.width=rect.width*dpr;canvas.height=rect.height*dpr;
  ctx.scale(dpr,dpr);ctx.strokeStyle='#60a5fa';ctx.lineWidth=2;ctx.lineCap='round';ctx.lineJoin='round';
}
resizeSig();window.addEventListener('resize',resizeSig);
function getPos(e){const r=canvas.getBoundingClientRect(),s=e.touches?e.touches[0]:e;return{x:s.clientX-r.left,y:s.clientY-r.top};}
canvas.addEventListener('mousedown',e=>{drawing=true;const p=getPos(e);ctx.beginPath();ctx.moveTo(p.x,p.y);});
canvas.addEventListener('mousemove',e=>{if(!drawing)return;const p=getPos(e);ctx.lineTo(p.x,p.y);ctx.stroke();onSig();});
canvas.addEventListener('mouseup',()=>drawing=false);
canvas.addEventListener('mouseleave',()=>drawing=false);
canvas.addEventListener('touchstart',e=>{e.preventDefault();drawing=true;const p=getPos(e);ctx.beginPath();ctx.moveTo(p.x,p.y);},{passive:false});
canvas.addEventListener('touchmove',e=>{e.preventDefault();if(!drawing)return;const p=getPos(e);ctx.lineTo(p.x,p.y);ctx.stroke();onSig();},{passive:false});
canvas.addEventListener('touchend',()=>drawing=false);
function onSig(){sigEmpty=false;document.getElementById('sigPh').style.opacity='0';document.getElementById('sigStatus').textContent='Signature recorded';document.getElementById('f-sig').classList.remove('has-error');}
function clearSig(){const r=canvas.getBoundingClientRect();ctx.clearRect(0,0,r.width,r.height);sigEmpty=true;document.getElementById('sigPh').style.opacity='1';document.getElementById('sigStatus').textContent='Awaiting signature...';}

// SUBMIT
async function submitForm(){
  if(!validate(4))return;
  const btn=document.getElementById('submitBtn'),lbl=document.getElementById('submitLbl');
  btn.disabled=true;lbl.textContent='Authenticating...';
  const p={
    action:'submit_lead',
    fullName:(document.getElementById('fname').value+' '+document.getElementById('lname').value).trim(),
    state:document.getElementById('state').value,
    age:document.getElementById('age').value,
    workStatus:'Unemployed/Not working',
    overSGA:document.querySelector('input[name="oversga"]:checked')?.value||'NO',
    priorClaim:document.querySelector('input[name="priorclaim"]:checked')?.value||'NO',
    hasDenial:document.querySelector('input[name="denial"]:checked')?.value||'N/A',
    condition:document.getElementById('condition').value.trim(),
    sitTime:document.getElementById('sittime').value,
    standTime:document.getElementById('standtime').value,
    liftWeight:document.getElementById('liftweight').value,
    impact:document.getElementById('impact').value.trim(),
    phone:document.getElementById('phone').value.trim(),
    email:document.getElementById('email').value.trim(),
    timestamp:new Date().toISOString(),hasSig:'YES'
  };
  try{await fetch(SUBMIT_URL+'?'+new URLSearchParams(p).toString(),{method:'GET',mode:'no-cors'});}catch(e){}
  document.getElementById('refNum').textContent='DIS-'+Date.now().toString(36).toUpperCase().slice(-6);
  document.getElementById('formBody').style.display='none';
  document.getElementById('autosave').style.display='none';
  document.getElementById('successScreen').classList.add('show');
  document.getElementById('progLine').style.width='100%';
  [1,2,3,4].forEach(n=>{document.getElementById('pip'+n).classList.add('done');document.getElementById('pip'+n).classList.remove('active');});
}

updateScore();
</script>
</body>
</html>
